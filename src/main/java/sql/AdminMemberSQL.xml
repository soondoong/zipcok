<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="zipcok.admin">
  
  
  	<select id = "adminMemberTotalCnt" parameterType="HashMap" resultType="Integer">

	select count(*) from
    (select rownum as rnum,a.* from
    (select * from zipcok_member
    where
  	mem_type like
    <choose>
        <when test = "type =='전체'">'%%'</when>
        <when test = "type !='전체'"> '%${type}%'</when>
    </choose>
	and
    mem_name like
    <choose>
    	<when test = "name ==''">'%%'</when>
   	 	<when test = "name !=''">'%${name}%'</when>
    </choose>
    )a)b
    
	</select>
  
  
	<select id="adminMemberList" parameterType="HashMap" resultType="zipcok.member.model.MemberDTO">
	
	select * from
    (select rownum as rnum,a.* from
    (select * from zipcok_member
    where
    mem_type like
    <choose>
        <when test = "type =='전체'">'%%'</when>
        <when test = "type !='전체'">'%${type}%'</when>
    </choose>
    and
    mem_name like
    <choose>
    	<when test = "name =='noinputmsg'">'%%'</when>
   	 	<when test = "name !='noinputmsg'">'%${name}%'</when>
    </choose>
 	)a)b
    
	</select>
	
	
	<select id="adminMemberManage" parameterType="String" resultType="zipcok.member.model.MemberDTO">
	select * from zipcok_member where mem_id=#{mem_id}
	</select>
	
	<update id="adminMemberPwdUpdate" parameterType="zipcok.member.model.MemberDTO">
      update zipcok_member set mem_pwd=#{mem_pwd} where mem_id=#{mem_id}
   </update>
   
   <update id="adminMemberNameUpdate" parameterType="zipcok.member.model.MemberDTO">
      update zipcok_member set mem_name=#{mem_name} where mem_id=#{mem_id}
   </update>

	<update id="adminMemberPhoneUpdate" parameterType="zipcok.member.model.MemberDTO">
      update zipcok_member set mem_phone=#{mem_phone} where mem_id=#{mem_id}
   </update>

	<update id="adminMemberTypeUpdate" parameterType="zipcok.member.model.MemberDTO">
      update zipcok_member set mem_type=#{mem_type} where mem_id=#{mem_id}
   </update>

  </mapper>