<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="zipcok.admin">
  <!-- 홈짐관리 시작 -->
  <select id="adminHomeGymTotalCnt" parameterType="HashMap" resultType="Integer">
  	select count(*) from (select * from homegym
  	<choose>
	  	<when test="searchType=='전체'">
	  		<choose>
		  		<when test="searchText==''">where hg_mem_id like '%%'</when>
		  		<when test="searchText!=''">where hg_nickname like '%${searchText}%'</when>
		  	</choose>
	  	</when>
	  	<when test="searchType=='아이디'">
		  	<choose>
		  		<when test="searchText==''">where hg_mem_id like '%%'</when>
		  		<when test="searchText!=''">where hg_mem_id = #{searchText}</when>
		  	</choose>
	  	</when>
	  	<when test="searchType=='닉네임'">
	  		<choose>
		  		<when test="searchText==''">where hg_nickname like '%%'</when>
		  		<when test="searchText!=''">where hg_nickname = #{searchText}</when>
		  	</choose>
  		</when>
  	</choose>
  	)a
  </select>
  <select id="adminHomeGymSearch" parameterType="HashMap" resultType="zipcok.homegym.model.HomeGymDTO">
  	select * from (select rownum as rnum,a.* from (select * from homegym
  	<choose>
	  	<when test="searchType=='전체'">
	  		<choose>
		  		<when test="searchText==''">where hg_mem_id like '%%'</when>
		  		<when test="searchText!=''">where hg_nickname like '%${searchText}%'</when>
		  	</choose>
	  	</when>
	  	<when test="searchType=='아이디'">
		  	<choose>
		  		<when test="searchText==''">where hg_mem_id like '%%'</when>
		  		<when test="searchText!=''">where hg_mem_id = #{searchText}</when>
		  	</choose>
	  	</when>
	  	<when test="searchType=='닉네임'">
	  		<choose>
		  		<when test="searchText==''">where hg_nickname like '%%'</when>
		  		<when test="searchText!=''">where hg_nickname = #{searchText}</when>
		  	</choose>
  		</when>
  	</choose>
  	order by hg_regist_date)a)b
  	where 
  	rnum between #{start} and #{end}
  </select>
  <!-- 홈짐관리 끝 -->
  <select id="adminHomeGymReservationSearchTotalCnt" parameterType="HashMap" resultType="Integer">
  
    select count(*) from
  (select rownum as rnum,a.* from
  (select * form homegym_reservation
  where
  <choose>
  	<when test="type=='전체'">
  	mem_id like '%%'
  	</when>
  	<when test="type=='예약자아이디'">
  	mem_id like '%${searchContent}%'
  	</when>
  	<when test="type=='제공자아이디'">
  	hg_mem_id like '%${searchContent}%'
  	</when>
  </choose>
  )a)b
  
  </select>  
  
  <select id="adminHomeGymReservationSearch" parameterType="HashMap" resultType="zipcok.homegym.model.HomeGymReservationDTO">
  
  select * from
  (select rownum as rnum,a.* from
  (select * form homegym_reservation
  where
  <choose>
  	<when test="type=='전체'">
  	mem_id like '%%'
  	</when>
  	<when test="type=='예약자아이디'">
  	mem_id like '%${searchContent}%'
  	</when>
  	<when test="type=='제공자아이디'">
  	hg_mem_id like '%${searchContent}%'
  	</when>
  </choose>
  order by reser_idx)a)b
  where rnum<![CDATA[>=]]>#{start} and rnum<![CDATA[<=]]>#{end}
  
  </select>
  
  
  </mapper>