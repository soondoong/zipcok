<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="zipcok.comm">

	<insert id="dailyWriteSQL" parameterType="zipcok.comm.model.ExBbsDTO">
		insert into
			exer_bbs
		values(exer_bbs_idx.nextval,
				'?',
				'한슬',
				#{ex_subject},
				#{ex_content},
				#{ex_cal},
				sysdate,
				sysdate,
				'말머리',
				0,
				#{ex_name})
	</insert>
	
	<select id="dailyListSQL" parameterType="Map" resultType="zipcok.comm.model.ExBbsDTO">
		select * from
		(select rownum as rnum,a.* from
		(select * from exer_bbs order by ex_idx desc) a) b
		where rnum <![CDATA[>=]]> #{start} and rnum <![CDATA[<=]]> #{end}
	</select>
	
	<select id="bbsContentSQL" parameterType="Integer" resultType="zipcok.comm.model.ExBbsDTO">
		select * from 
			exer_bbs
		where
			ex_idx=#{ex_idx}
	</select>
	
	<select id="getTotalCntSQL" resultType="Integer">
		select
			count(*)
		from
			exer_bbs	
	</select>
	
	<update id="bbsUpdateSQL" parameterType="zipcok.comm.model.ExBbsDTO">
		update
			exer_bbs
		set
			ex_subject=#{ex_subject},
			ex_content=#{ex_content},
			ex_cal=#{ex_cal},
			ex_name=#{ex_name}
		where
			ex_idx=#{ex_idx}
	</update>
	
	<delete id="bbsDeleteSQL">
		delete from
			exer_bbs
		where
			ex_idx=#{ex_idx}
	</delete>
	
	<update id="bbsReadnumSQL" parameterType="zipcok.comm.model.ExBbsDTO">
		update
			exer_bbs
		set
			ex_readnum=ex_readnum+1 
		where
			ex_idx=#{ex_idx}
	</update>
	
	<insert id="bbsReWriteSQL" parameterType="zipcok.comm.model.ExReBbsDTO">
		insert into
			bbs_rebbs
		values(bbs_rebbs_idx.nextval,
				1,
				1,
				'한슬',
				#{re_content},
				sysdate,
				1,
				?,
				#{re_bbs_idx})
	</insert>
	
</mapper>