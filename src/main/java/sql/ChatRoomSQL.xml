<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="zipcok.almon">
 
<insert id = "createRoom" parameterType="zipcok.almom.domain.ChatRoomDTO">
insert into  
chatroom
values (
chatroom_idx.nextval ,
#{ croom_userid},
#{croom_coachid}, 
#{croom_req_idx},
sysdate
)

</insert>


<select id ="isRoom" parameterType="zipcok.almom.domain.ChatRoomDTO" resultType = "zipcok.almom.domain.ChatRoomDTO">

select * from 
chatroom
WHERE croom_userid = #{croom_userid} 
and 
croom_coachid = #{croom_coachid} 
and
croom_req_idx = #{croom_req_idx} 
</select>


<select id ="findRoomInfo"  resultType = "zipcok.almom.domain.ChatRoomDTO">

select * from 
chatroom
WHERE
croom_req_idx = #{croom_req_idx} 
</select>






<select id ="nomalChatRoomListSQL" parameterType="String" resultType = "zipcok.almom.domain.ChatRoomDTO">
select * from 
chatroom
WHERE
croom_userid =   #{ id} 

</select>


<select id ="coachChatRoomListSQL" parameterType="String" resultType = "zipcok.almom.domain.ChatRoomDTO">
select * from 
chatroom
WHERE
croom_coachid =  #{ id} 

</select>


<delete id="roomDelete">
delete chatroom
where 
croom_idx = #{croom_idx}
</delete>


  </mapper>