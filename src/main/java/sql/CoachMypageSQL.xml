<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="mo.coachmypage">
  
  <select id="searchRequestList" parameterType="HashMap" resultType="zipcok.coach.model.RequestFormDTO">
select
rownum,a.*,m.mem_name,m.mem_addr,m.mem_birth 
from
zipcok_member m,
(select 
r.* from
request_form r
where
req_receive_id= #{id} )a
where
m.mem_id= a.req_mem_id
and
rownum between #{start} and #{end}

 </select>
 
 <delete id="requestDelete">
		delete from
			request_form
		where
			req_idx = #{req_idx}
	</delete>
	
	<update id="requestStatusChange">
	update request_form
	set
	req_status = 'ing'
	where req_idx = #{req_idx}
	</update>
	
	<!-- 홈짐 좋아요 총 수 -->
	 <select id="coachMypageHomeGymLikeListTotalCnt" resultType="Integer">
		select count(*) from
	 	(select rownum as rnum,a.* from
	 	(select * from zipcok_like where like_mem_id=#{mem_id} and like_key='홈짐' order by like_idx desc)a)b
	</select>
	
	 <!-- 홈짐 좋아요 목록 -->
	 <select id="coachMypageHomeGymLikeList"  resultType="zipcok.mypage.model.LikeDTO">
	 	select * from
	 	(select rownum as rnum,a.* from
	 	(select * from zipcok_like where like_mem_id=#{mem_id} and like_key='홈짐' order by like_idx desc)a)b
	 	where rnum<![CDATA[>=]]>#{start} and rnum<![CDATA[<=]]>#{end}
	 </select>	
	 
	 <!-- F&A/고객센터 총 개시글 수 -->
	<select id="coachMypageWriteListTotalCnt" resultType="Integer">
		select count(*) from
	 	(select rownum as rnum,a.* from
	 	(select * from zipcok_bbs where bbs_mem_id=#{mem_id} order by bbs_idx desc)a)b
	</select>
	
	<!-- F&A/고객센터 글목록 -->
	<select id="coachMypageWriteList"  resultType="zipcok.cs.model.CsDTO">
		select * from
		(select rownum as rnum,a.* from
		(select * from zipcok_bbs where bbs_mem_id=#{mem_id} order by bbs_idx desc) a) b
		where rnum<![CDATA[>=]]>#{start} and rnum<![CDATA[<=]]>#{end}
	</select>
	
  
  </mapper>